\mode<presentation>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% SLIDE BACKGROUNDS %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%Set background appearance for title slide and other slides

\newcommand\customtitlebackground{
  %%%%%%%%%%%%%%%%%%%%%%
  %TITLE PAGE BACKGROUND
  %Big gray-ish rectangle on top, contains title, images
    %first () is coords of bottom left corner, second () is width/height
  \fill[color=gray, opacity=0.25] (0,0.208\paperheight) rectangle (\the\paperwidth,\the\paperheight);
  %Bottom strip of red and blue rectangles containing author
  \fill[color=nasared,opacity=0.75] (0,0) rectangle(0.23\paperwidth,0.198\paperheight);
  \fill[color=nasablue,opacity=0.75] (0.238\paperwidth,0) rectangle(\the\paperwidth,0.198\paperheight);
}

\newcommand\customstandardbackground{
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    %BACKGROUND FOR ALL OTHER PAGES
    %Simply a white background
    \fill[white,opacity=1] (0,0) rectangle(\the\paperwidth,\the\paperheight);
}

%SET BACKGROUND FOR EACH SLIDE
\setbeamertemplate{background}{
  \begin{tikzpicture}

  %Total Frame
  \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);

  % %option to have slide before title (e.g. SBU)
  % \ifnum\slidebeforetitle=1%
  %   %(relax stops the macro from continuing, does nothing else)
  %   \ifnum\thepage=2\relax%
  %     %title page is the second page (not first like default)
  %     \customtitlebackground
  %   \else
  %     %first and 3rd pages on are normal background
  %     \customstandardbackground
  %   \fi

  % \else
  % %NORMAL BACKGROUND OPTIONS

  %(relax stops the macro from continuing, does nothing else)
  \ifnum\thepage=\titlepagenum\relax%
    % %%%%%%%%%%%%%%%%%%%%%%
    % %TITLE PAGE BACKGROUND
    % %Big gray-ish rectangle on top, contains title, images
    %   %first () is coords of bottom left corner, second () is width/height
    % \fill[color=gray, opacity=0.25] (0,0.208\paperheight) rectangle (\the\paperwidth,\the\paperheight);
    % %Bottom strip of red and blue rectangles containing author
    % \fill[color=nasared,opacity=0.75] (0,0) rectangle(0.23\paperwidth,0.198\paperheight);
    % \fill[color=nasablue,opacity=0.75] (0.238\paperwidth,0) rectangle(\the\paperwidth,0.198\paperheight);
    \customtitlebackground
  \else
    % %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    % %BACKGROUND FOR ALL OTHER PAGES
    % %Simply a white background
    % \fill[white,opacity=1] (0,0) rectangle(\the\paperwidth,\the\paperheight);
    \customstandardbackground
   \fi

   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
   %ADD GRID FOR JSC BUILDING 16 ROOM 171 MATRIX SCREENS
    \ifnum\usegrid=1%
    \begin{tikzpicture}
      \draw (0, 0) -- (\paperwidth, 0);
      \draw[thick] (0, 0.333\paperheight) -- (\paperwidth, 0.333\paperheight);
      \draw[thick] (0, 0.667\paperheight) -- (\paperwidth, 0.667\paperheight);

      \draw (0, 0) -- (0, \paperheight);
      \draw[thick] (0.333\paperwidth, 0) -- (0.333\paperwidth, \paperheight);
      \draw[thick] (0.667\paperwidth, 0) -- (0.667\paperwidth, \paperheight);
    \end{tikzpicture}
    \fi
  \end{tikzpicture}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% TITLE PAGE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%Set text and layout for title slide

\defbeamertemplate*{title page}{nasa}[1][]
{
    %TEXT BOX FOR TITLE AND SUBTITLE
      %vskip: distance of title from closest above item (top of page for title)
      %wd: width of textbox
      %ht: starting height of textbox from top
      %leftskip: left alignment of box?
      %sep: line spacing?
      %#1: ?
    % \vskip0.625\paperheight%
    \begin{beamercolorbox}[wd=\titletextwidth,ht=\titleheightfrac\paperheight,leftskip=\titleleftalignfrac\textwidth,sep=8pt,#1]{title page header}
    % \begin{beamercolorbox}[wd=(0.9375*\pagewidth),leftskip=(0.234*\pagewidth)]{title page header}
      \usebeamerfont{title}\inserttitle\par%
      \usebeamerfont{subtitle}\insertsubtitle\par%
    \end{beamercolorbox}%
    %TEXTBOX FOR AUTHOR
    % \vskip0.75cm%
    % \vskip0.065\paperheight%
    \FPeval{authorheightfrac}{0.85-\titleheightfrac} %get author height to be constant
    % 0.065
    \begin{beamercolorbox}[wd=12cm,ht=\authorheightfrac\paperheight,leftskip=0.2675\textwidth,#1]{author}
      \usebeamerfont{author}\insertauthor%
    \end{beamercolorbox}
    %TEXTBOX FOR DATE
     % \vskip0.2cm%
     \vskip0.015\paperheight
    \begin{beamercolorbox}[wd=12cm,leftskip=0.2675\textwidth,#1]{date}
      \usebeamerfont{author}\insertdate%
    \end{beamercolorbox}
  \vfill
}

\mode
<all>
